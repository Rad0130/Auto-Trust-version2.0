{"ast":null,"code":"var _jsxFileName = \"/home/shafiur/Auto-Trust-Car-Shop-/frontend/src/components/Notifications/NotificationSystem.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport io from \"socket.io-client\";\nimport \"../../styles/Notifications.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io(\"http://localhost:5000\"); // Connect to your backend\n\nconst NotificationSystem = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [notifications, setNotifications] = useState([]);\n  const [isVisible, setIsVisible] = useState(false);\n  useEffect(() => {\n    if (user) {\n      socket.emit(\"joinUser\", user._id); // Join a user-specific room\n\n      socket.on(\"newCarPosted\", data => {\n        const newNotification = {\n          message: `New car posted: ${data.title} by ${data.userName}`,\n          id: Date.now()\n        };\n        setNotifications(prevNotifications => [newNotification, ...prevNotifications]);\n        setIsVisible(true);\n        setTimeout(() => setIsVisible(false), 5000); // Hide after 5 seconds\n      });\n    }\n    return () => {\n      socket.off(\"newCarPosted\");\n    };\n  }, [user]);\n  if (!user) return null; // Don't show notifications for unauthenticated users\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `notification-container ${isVisible ? \"visible\" : \"\"}`,\n    children: [\"\\xA0\\xA0\\xA0\\xA0\\xA0\", notifications.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"notification-card\",\n      children: [\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: notifications[0].message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 10\n      }, this), \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsVisible(false),\n        className: \"close-btn\",\n        children: \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xD7 \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 10\n      }, this), \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 8\n    }, this), \"\\xA0\\xA0\\xA0\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 4\n  }, this);\n};\n_s(NotificationSystem, \"/GA7weTXmex84/IsjgehwkSa29A=\");\n_c = NotificationSystem;\nexport default NotificationSystem;\nvar _c;\n$RefreshReg$(_c, \"NotificationSystem\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AuthContext","io","jsxDEV","_jsxDEV","socket","NotificationSystem","_s","user","notifications","setNotifications","isVisible","setIsVisible","emit","_id","on","data","newNotification","message","title","userName","id","Date","now","prevNotifications","setTimeout","off","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/home/shafiur/Auto-Trust-Car-Shop-/frontend/src/components/Notifications/NotificationSystem.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { AuthContext } from \"../../context/AuthContext\";\nimport io from \"socket.io-client\";\nimport \"../../styles/Notifications.css\";\n\nconst socket = io(\"http://localhost:5000\"); // Connect to your backend\n\nconst NotificationSystem = () => {\n const { user } = useContext(AuthContext);\n const [notifications, setNotifications] = useState([]);\n const [isVisible, setIsVisible] = useState(false);\n\n useEffect(() => {\n   if (user) {\n     socket.emit(\"joinUser\", user._id); // Join a user-specific room\n\n     socket.on(\"newCarPosted\", (data) => {\n       const newNotification = {\n         message: `New car posted: ${data.title} by ${data.userName}`,\n         id: Date.now()\n       };\n       setNotifications((prevNotifications) => [newNotification, ...prevNotifications]);\n       setIsVisible(true);\n       setTimeout(() => setIsVisible(false), 5000); // Hide after 5 seconds\n     });\n   }\n\n   return () => {\n     socket.off(\"newCarPosted\");\n   };\n }, [user]);\n\n if (!user) return null; // Don't show notifications for unauthenticated users\n\n return (\n   <div className={`notification-container ${isVisible ? \"visible\" : \"\"}`}>\n     {notifications.length > 0 && (\n       <div className=\"notification-card\">\n         <p>{notifications[0].message}</p>\n         <button onClick={() => setIsVisible(false)} className=\"close-btn\">\n           &times;\n         </button>\n       </div>\n     )}\n   </div>\n );\n};\n\nexport default NotificationSystem;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,WAAW,QAAQ,2BAA2B;AACvD,OAAOC,EAAE,MAAM,kBAAkB;AACjC,OAAO,gCAAgC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,MAAM,GAAGH,EAAE,CAAC,uBAAuB,CAAC,CAAC,CAAC;;AAE5C,MAAMI,kBAAkB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChC,MAAM;IAAEC;EAAK,CAAC,GAAGR,UAAU,CAACC,WAAW,CAAC;EACxC,MAAM,CAACQ,aAAa,EAAEC,gBAAgB,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAEjDC,SAAS,CAAC,MAAM;IACd,IAAIS,IAAI,EAAE;MACRH,MAAM,CAACQ,IAAI,CAAC,UAAU,EAAEL,IAAI,CAACM,GAAG,CAAC,CAAC,CAAC;;MAEnCT,MAAM,CAACU,EAAE,CAAC,cAAc,EAAGC,IAAI,IAAK;QAClC,MAAMC,eAAe,GAAG;UACtBC,OAAO,EAAE,mBAAmBF,IAAI,CAACG,KAAK,OAAOH,IAAI,CAACI,QAAQ,EAAE;UAC5DC,EAAE,EAAEC,IAAI,CAACC,GAAG,CAAC;QACf,CAAC;QACDb,gBAAgB,CAAEc,iBAAiB,IAAK,CAACP,eAAe,EAAE,GAAGO,iBAAiB,CAAC,CAAC;QAChFZ,YAAY,CAAC,IAAI,CAAC;QAClBa,UAAU,CAAC,MAAMb,YAAY,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;MAC/C,CAAC,CAAC;IACJ;IAEA,OAAO,MAAM;MACXP,MAAM,CAACqB,GAAG,CAAC,cAAc,CAAC;IAC5B,CAAC;EACH,CAAC,EAAE,CAAClB,IAAI,CAAC,CAAC;EAEV,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI,CAAC,CAAC;;EAExB,oBACEJ,OAAA;IAAKuB,SAAS,EAAE,0BAA0BhB,SAAS,GAAG,SAAS,GAAG,EAAE,EAAG;IAAAiB,QAAA,GAAC,sBACtE,EAACnB,aAAa,CAACoB,MAAM,GAAG,CAAC,iBACvBzB,OAAA;MAAKuB,SAAS,EAAC,mBAAmB;MAAAC,QAAA,GAAC,sCACjC,eAAAxB,OAAA;QAAAwB,QAAA,EAAInB,aAAa,CAAC,CAAC,CAAC,CAACS;MAAO;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,wCACjC,eAAA7B,OAAA;QAAQ8B,OAAO,EAAEA,CAAA,KAAMtB,YAAY,CAAC,KAAK,CAAE;QAACe,SAAS,EAAC,WAAW;QAAAC,QAAA,EAAC;MAElE;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,gCACX;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACN,EAAC,cACJ;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AAET,CAAC;AAAC1B,EAAA,CAvCID,kBAAkB;AAAA6B,EAAA,GAAlB7B,kBAAkB;AAyCxB,eAAeA,kBAAkB;AAAC,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}